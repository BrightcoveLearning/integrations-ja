---
title: 'KollectiveeCDN導入ガイド'
description: 'このトピックでは、KollectiveeCDNをBrightcovePlayerと統合する方法を学習します。'
parent: Kollective
---
 <h1>{{page.title}}</h1>
<article class="bcls-article">
  <summary>{{ page.description }}</summary>

<section class="bcls-section">
<h2 id="Overview">概要</h2>

<p>
  ブライトコーブは、<a href="https://kollective.com/ECDN-solutions/"> Kollective eCDN を使用して Video On Demand (VOD) とブライトコーブのライブイベントをブライトコーブプレーヤーに配信する統合を作成しました</a>。
</p>

<p>eCDN ソリューションは、企業ネットワークへのコンテンツ配信に役立ちます。企業のオフィスなど、多数の視聴者が同じコンテンツを同時に視聴している場合に、ネットワークのボトルネックを軽減します。eCDN では、eCDN サーバーインスタンスごとに、オリジンサーバーからビデオコンテンツを 1 回ダウンロードします。企業ネットワークのビューアは、LAN 経由でeCDNサーバーからコンテンツを受信します。 </p>
<p>eCDN を使用する利点には、次のようなものがあります。</p>
<ul>
  <li>
    企業ロケーションのWANトラフィックの削減
  </li>
  <li>
    規模での表示エクスペリエンスの向上
  </li>
  <li>
    ネットワーク・コストの削減
  </li>
  <li>
    eCDN が企業のファイアウォールの内側にあるため、セキュリティが向上します。
  </li>
  <li>
    パフォーマンス監視
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Requirements">必要条件</h2>
<p>
  eCDN プラグインには、次の要件が適用されます。
</p>
<ul>
  <li>
    ブライトコーブプレーヤーバージョン 6.42.2 以降を使用する必要があります
  </li>
  <li>
    動的配信には動画が取り込まれなければならない
  </li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Getting_started">はじめに</h2>
<p>
  kollective プラグインを使用するには、いくつかの初期設定が必要です。
</p>
<ol class="bcls-tasklist">
  <li>
    <a href="#Deploying_server_side_application">サーバーサイドアプリケーションのデプロイ</a>
  </li>
  <li>
    <a href="#Installing_the_player_plugin">Player プラグインをインストールする</a>
  </li>
  <li>
    <a href="#Whitelisting_domain_names">ドメイン名のホワイトリスト登録</a>
  </li>
  <li>
    <p>
      デプロイ手順が完了したので、コンテンツを同期し、プレーヤーコードを埋め込む準備が整いました。詳細については、以下を参照してください。
    </p>
    <ul>
      <li>
          <a href="/ecdn/kollective/kollective-user-guide.html">コレクティブ eCDN ユーザーガイド</a>
      </li>
    </ul>

  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Deploying_server_side_application">サーバー側アプリケーションのデプロイ</h2>
<p>バックエンド eCDN アプリケーションをサーバーにデプロイする必要があります。</p>

<h3>サーバの要件</h3>
<p>
  バックエンドアプリケーションのホスティングサーバーには、次の要件が適用されます。
</p>
<ul>
  <li>
    NodeJSバージョン13+
  </li>
  <li>
    ホスティングサーバー:Linux または Windows サーバ (バックエンドアプリケーションは Heroku にもデプロイ可能)
  </li>
  <li>
    MongoDB データベース
  </li>
</ul>
<p>
  MongoDB は、ホスティングサーバーと同じサーバー、別のサーバー、または<a href="https://www.mongodb.com/cloud"> MongoDB Atlas クラウドデータベースを使用することもできます</a>。
</p>

<h3>構成の設定</h3>
<p>
  バックエンドアプリケーションについては、いくつかの設定変更を行います。以下の手順に従います。
</p>
<ol class="bcls-tasklist-restart">
  <li>
    バックエンドアプリケーションデプロイパッケージのルートディレクトリで、<strong> config.env</strong>ファイルを開きます。
  </li>
  <li>
    <p>
      <strong>本番モード</strong> -本番環境または開発環境でアプリケーションを実行するモードを設定します。
    </p>
    <p>
      どちらか
    </p>
    <pre>
<code class="language-bash" translate="No">NODE_ENV=production</code></pre>
<p>
  または
</p>
<pre>
<code class="language-bash" translate="No">NODE_ENV=development</code></pre>
  </li>
  <li>
    <p>
      <strong>アプリケーションポート</strong> -アプリケーションを実行するポートを設定します。
    </p>
    <p>
      例:
    </p>
    <pre>
<code class="language-bash" translate="No">PORT=3000</code></pre>
  </li>
   <li>
    <p>
      <strong>データベース</strong> -バックエンドアプリケーションは、MongoDBデータベースを必要とします。
    </p>
    <p>
      データベース接続は、次の形式で指定できます。
    </p>
     <pre>
<code class="language-bash" translate="No">DATABASE=mongodb://{host}:{port}/{databaseName}</code></pre>
    <p>
      例:
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb://localhost:27017/Brightcove</code></pre>
    <p>
      MongoDB Atlas クラウドデータベースを使用する場合は、次のように設定できます。
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb+srv://{user}:{password}@{cluster}/{databaseName}?retryWrites=true&amp;w=majority</code></pre>
<p>
      例:
    </p>
    <pre>
<code class="language-bash" translate="No">DATABASE=mongodb+srv://myuser:mypassword@cluster0-xafsz.mongodb.net/MyDatabase?retryWrites=true&amp;w=majority</code></pre>
  </li>
  <li>
    <p>
      <strong>電子メールサービス</strong> -バックエンドアプリケーションでは、通知メールを送信するための電子メールサービス設定が必要です。
    </p>
    <h5>SendGrid</h5>
    <p>
      SendGrid 電子メールサービスを使用して電子メールを送信するには、SendGrid のユーザー名とパスワードで以下を使用します。
    </p>
    <pre>
<code class="language-bash" translate="No"># Send email using Sendgrid email service.
EMAIL_SERVICE=SendGrid

# Send email using Sendgrid email service.
SENDGRID_USERNAME=<span class="bcls-input">your SendGrid username</span>
SENDGRID_PASSWORD=<span class="bcls-input">your SendGrid password</span>
</code></pre>
    <h5>その他</h5>
    <p>
      他の電子メールサービスを使用して電子メールを送信するには、電子メールサーバーのホスト、ポート、ユーザー名、パスワードで以下を使用します。
    </p>
    <pre>
<code class="language-bash" translate="No"># Set EMAIL_SERVICE=Other to send email using normal email service using host and port
EMAIL_SERVICE=Other

# Send email using host and port
EMAIL_HOST=<span class="bcls-input">your email host</span>
EMAIL_PORT=<span class="bcls-input">your email port</span>
EMAIL_USERNAME=<span class="bcls-input">your email username</span>
EMAIL_PASSWORD=<span class="bcls-input">your email password</span>
EMAIL_FROM=<span class="bcls-input">your email from address</span>
</code></pre>
  </li>
  <li>
    <p>
      <strong>Kollective 公開 API ベース URL</strong> -サーバーサイドアプリケーションは Kollective 公開 API を呼び出して、ビデオソースを含むブライトコーブからビデオを Kollective に公開し、コンテンツトークンを取得します。ここでは、Kollective パブリッシュ API ベース URL を指定します。
    </p>
    <pre>
<code class="language-bash" translate="No"># Kollective publish API base url
KOLLECTIVE_PUBLISH_API_BASE_URL=https://content.stage.kollective.app/api
</code></pre>
  </li>
  <li>
    <p>
      <strong>Brightcove API ベース URL</strong> -サーバーサイドアプリケーションには、次の Brightcove API ベース URL が必要です。
    </p>
    <pre>
<code class="language-bash" translate="No"># Brightcove API base URLs
BRIGHTCOVE_ACCESS_TOKEN_BASE_URL=https://oauth.brightcove.com/v4/access_token
BRIGHTCOVE_CMS_API_BASE_URL=https://cms.api.brightcove.com/v1
BRIGHTCOVE_LIVE_API_BASE_URL=https://api.bcovlive.io/v1
</code></pre>
  </li>
  <li>
    <p>
      <strong>カスタムフィールド名</strong> -次のカスタムフィールド名設定は変更できません。
    </p>
    <pre>
<code class="language-bash" translate="No"># Required custom field names for each Brightcove Account ID
CUSTOM_FIELD_KOLLECTIVE_CONTENT_TOKEN=kollective_content_token
CUSTOM_FIELD_KOLLECTIVE_IS_SYNCHRONIZED=kollective_is_synchronized
CUSTOM_FIELD_KOLLECTIVE_SYNCHRONIZED_TIME=kollective_synchronized_time
CUSTOM_FIELD_KOLLECTIVE_LAST_SYNC_STATUS=kollective_last_sync_status
</code></pre>
  </li>
</ol>

<h3>カスタムフィールドの追加</h3>
<p>
  次に、Video Cloud Studio で必要なカスタムフィールドを定義する準備ができました。
</p>
<ol class="bcls-tasklist">
  <li>
    <p>
      Video Cloud Studio で、[ <strong>管理]</strong>ドロップダウンメニューを展開し、[ <strong>ビデオフィールド] を選択します</strong>。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Video Fields" src="/assets/images/kollective/video-fields.png" />
      <figcaption class="bcls-caption--image">動画フィールド</figcaption>
    </figure>
  </li>
  <li>
    <p>
      [ビデオフィールド] ページで、[ <strong>カスタムフィールドの追加]</strong>ボタンを選択します。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Add Custom Field" src="/assets/images/kollective/add-custom-field.png" />
      <figcaption class="bcls-caption--image">カスタムフィールドの追加</figcaption>
    </figure>
  </li>
  <li>
    <p>
      ここでは、Kollective に必要なカスタムフィールドを追加します。
    </p>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Custom field values" src="/assets/images/kollective/custom-field-values.png" />
      <figcaption class="bcls-caption--image">カスタムフィールド値</figcaption>
    </figure>
    <p>
      シンジケーターアカウントに使用する各 Brightcove アカウント ID では、同期が機能するためには、次のカスタムフィールド名を定義する必要があります。
    </p>
    <table class="bcls-table">
      <caption class="bcls-caption--table">ブライトコーブのビーコン機能の概要</caption>
      <thead class="bcls-table__head">
        <tr>
          <th style="text-align: center;width:70%;">カスタムフィールド名</th>
          <th style="text-align: center;width:30%;">タイプ</th>
        </tr>
      </thead>
      <tbody class="bcls-table__body">
        <tr>
          <td>kollective_content_token</td>
          <td style="text-align: center;">テキスト</td>
        </tr>
        <tr>
          <td>kollective_is_sronized</td>
          <td style="text-align: center;">テキスト</td>
        </tr>
        <tr>
          <td>kollective_synchronized_time</td>
          <td style="text-align: center;">テキスト</td>
        </tr>
        <tr>
          <td>kollective_last_sync_status</td>
          <td style="text-align: center;">テキスト</td>
        </tr>
      </tbody>
    </table>
    <p>
      [ビデオフィールド] 詳細ページで、次のように入力します。
    </p>
    <ul>
      <li>
        [表示名]: 上記の表のカスタムフィールド名を入力します。各フィールドを別々に保存します。
      </li>
      <li>
        内部名-これは表示名から生成されます。
      </li>
      <li>
        <strong></strong>タイプを「<strong>テキスト」のままにします。</strong>
      </li>
      <li>
        <strong>説明を入力します。</strong>
      </li>
      <li>
        [ <strong>このフィールドを必須にする]</strong>オプションは選択されていないままにします。
      </li>
    </ul>
  </li>
</ol>

<h3>アプリケーションのデプロイ</h3>
<p>
  必要な構成の変更をすべて実行し、必要なカスタムフィールドを追加したら、バックエンドアプリケーションをサーバーにデプロイする準備が整います。
</p>
<ol class="bcls-tasklist">
  <li>
    サーバー側のアプリケーションパッケージを、ホスティングサーバーのターゲット展開フォルダーにコピーします。
  </li>
  <li>
    <p>
      コンソールアプリケーションを開き、前の手順でアプリケーションパッケージのルートフォルダに移動します。次のコマンドを実行して、必要なノードパッケージをすべてインストールします。
    </p>
    <pre>
<code class="language-bash" translate="No"># npm install --production
</code></pre>
  </li>
  <li>
    <p>
      以下のコマンドを実行して、デフォルトのスーパー管理者ユーザーをインポートします。
    </p>
    <pre>
<code class="language-bash" translate="No"># npm run import-users
</code></pre>
  </li>
  <li>
    <p>
      バックエンドアプリケーションを起動するには、次のコマンドを実行します。
    </p>
    <pre>
<code class="language-bash" translate="No"># npm run start
</code></pre>
  </li>
  <li>
    <p>
      すべてが正しくセットアップされている場合は、設定されたアドレスを使用してブラウザ上でアプリケーションを開くことができます。
    </p>
    <p>
      例:
    </p>
    <pre>
<code class="language-bash" translate="No">http://localhost:3000/login
</code></pre>
  </li>
  <li>
    <p>
      上記でインポートしたデフォルトのスーパー管理者ユーザーを使用してアプリケーションにログインします。
    </p>
    <ul>
      <li>
        ユーザー名:super-admin@brightcove.com
      </li>
      <li>
        パスワード:br1ghtc0ve
      </li>
    </ul>
    <figure class="bcls-figure"><img class="bcls-image--no-border" alt="Server-side login" src="/assets/images/kollective/backend-login.png" />
      <figcaption class="bcls-caption--image">サーバー側のログイン</figcaption>
    </figure>
  </li>
</ol>
</section>

<section class="bcls-section">
<h2 id="Installing_the_player_plugin">プレーヤープラグインをインストールする</h2>
<p>
  Kollective を Brightcove Player と統合するには、Kollective プラグインをプレーヤーに追加します。
</p>

	<aside class="bcls-aside bcls-aside--tip">Kollective プラグインは、ブライトコーブプレーヤーバージョン v6.45 以降でサポートされています。</aside>
<p>
      以下の手順では、Video Cloud Studio を使用してプラグインをロードする方法について詳しく説明します。
    </p>

    <ol class="bcls-tasklist-restart">
      <li>
        Video Cloud Studioで、<strong>プレイヤー</strong>モジュールを作成し、新しいプレーヤーを作成するか、プラグインを追加するプレーヤーを見つけます。
      </li>
      <li>プレーヤーのリンクを選択して、プレイヤーのプロパティを開きます。</li>
      <li>左側のナビゲーションメニューで [ <strong>プラグイン</strong> ] を選択します。</li>
      <li>
        <p>
          次に、[ <strong>プラグインを追加]</strong>ボタンを選択し、[ <strong>ブライトコーブプラグイン] を選択します</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Add a Plugin button"
            src="/assets/images/ecdn/kollective/add-a-plugin.png"
          />
          <figcaption class="bcls-caption--image">
            [プラグインを追加] ボタン
          </figcaption>
        </figure>
      </li>
      <li>
        <p>
          [ <strong>ブライトコーブプラグイン]</strong>ドロップダウンを展開し、[ <strong>コレクティブ] を選択します</strong>。
        </p>

        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="Kollective plugin"
            src="/assets/images/ecdn/kollective/kollective_plugin.png"
          />
          <figcaption class="bcls-caption--image">
            Kollective プラグイン
          </figcaption>
        </figure>
      </li>
  <li>
    <p>
      <strong>オプション (JSON) の場合</strong> :次のように入力します。
        </p>
        <ul>
          <li>
            <code translate="No">ksdkUrl</code> -Kollective <code translate="No">ksdk</code>のライブラリへのポイント — お好みのバージョンを使用する
          </li>
        </ul>
    <pre>
<code class="language-bash" translate="No">{
    &quot;ksdkUrl&quot;: &quot;<span class="bcls-input">ksdk URL</span>&rdquo;
}
</code></pre>
      </li>
    </ul>
  </li>
  <li>
    [ <strong>保存]</strong>ボタンを選択します。
  </li>
  <li>
    プレーヤーを公開します。
  </li>
  <li>
	埋め込みコードをから更新/変更します<span class="bcls-input">data-video-id</span>に<span class="bcls-input">data-kollective-video-id</span>。
  </li>
<aside class="bcls-aside bcls-aside--warning">Kollective統合で使用するためにプレーヤーを埋め込む場合は、埋め込みコードをから更新/変更する必要があります。<span class="bcls-input"> data-video-id</span>に<span class="bcls-input">data-kollective-video-id</span>。</aside>
</ol>
</section>

<section class="bcls-section">
<h2 id="Whitelisting_domain_names">ドメイン名をホワイトリストに登録する</h2>
<p>
  Kollective は、CORSエラーを取得しないように、ホワイトリストにあなたのドメイン名を追加する必要があります。Kollective に次のドメイン名を指定します。
</p>
<ul>
  <li>
    <p>
      サーバーサイドアプリケーションをデプロイしたドメイン名
    </p>
  </li>
  <li>
    <p>
      ウェブページをデプロイしたドメイン
    </p>
  </li>
</ul>
<p>
  たとえば、<strong> https://my-server.com/my-video-page に Kollective プラグインで Brightcove Player</strong>を使用するページがある場合、<strong> my-server.com</strong>ドメインを Kollective に追加する必要があります。ホワイトリスト。これにより、CORSエラーを返さずにページ上で再生できるようになります。
</p>
</section>


<!-- <section class="bcls-section">
<h2 id="Limitations">Limitations</h2>

<p>Here are the limitation associated with the thumbnails plugin.</p>

<ul>
	<li>The current version of this plugin does not support thumbnails on mobile devices.</li>
</ul>
</section>

<section class="bcls-section">
<h2 id="Changelog">Changelog</h2>

<p>See the <a href="/plugins/changelog/thumbnails-plugin-changelog.html">changelog here</a>.</p>
</section> -->
</article>